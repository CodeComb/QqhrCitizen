@model  QqhrCitizen.Models.ViewModel.vRegister
@{
    ViewBag.Title = "用户注册 - 齐齐哈尔市民学习网";
}
<script>

    function CheckUsername() {
        if ($("#Username").val() == "") {
            CastMsg("用户名不能为空");
            return false;
        } else {
             
            $.get("/User/CheckName", {
                Username: $("#Username").val()
            }, function (data) {
                if (data == "OK") {
                    return true;
                }
                else return false;
            });
        }
    }

    function frmCheck() {
        $("#UsernameInfo").html("");
        $("#ConfirmInfo").html("");
        if (!CheckPassword()) return false;
        var result = CheckUsername();
        alert(result);
        if (!CheckUsername()) return false;
        if ($("#Password").val().length < 4) {
            CastMsg("至少输入4位密码");
            return false;
        }
        return true;
    }
   
    function CheckPassword() {
        if ($('#Password').val() != $('#Confirm').val()) {
            CastMsg("两次输入密码不一致");
            $("#ConfirmInfo").css("color:red");
            return false;
        }
        return true;
    }

</script>
@using (Html.BeginForm("Register", "User", FormMethod.Post, new
                    {
                        onsubmit = "return frmCheck();"
                    }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    <fieldset>
        <div class="container wrap-cont">
            <div class="narrow block">
                <h2>新用户注册</h2>
                <table class="detail-table">
                    <tr>
                        <td class="row-title">用户名</td>
                        <td>
                            @Html.TextBoxFor(model => model.Username, new { @class = "textbox w-3" })<span id="UsernameInfo" style="color:red"></span>
                        </td>
                    </tr>
                    <tr>
                        <td class="row-title">密码</td>
                        <td>
                            @Html.PasswordFor(model => model.Password, new { @class = "textbox w-3" })
                        </td>
                    </tr>
                    <tr>
                        <td class="row-title">确认密码</td>
                        <td>@Html.Password("Confirm", "", new { @class = "textbox w-3" })<span id="ConfirmInfo"></span></td>
                    </tr>
                    <tr>
                        <td class="row-title">真实姓名</td>
                        <td>@Html.TextBoxFor(model => model.Realname, new { @class = "textbox w-3" })</td>
                    </tr>
                    <tr>
                        <td class="row-title">电子邮箱</td>
                        <td>@Html.TextBoxFor(model => model.Email, new { @class = "textbox w-3" })</td>
                    </tr>
                    <tr>
                        <td class="row-title">电话号码</td>
                        <td>@Html.TextBoxFor(model => model.Phone, new { @class = "textbox w-3" })</td>
                    </tr>
                </table>
                <p><input type="submit" value="注册" class="button blue" /></p>
            </div>
        </div>
    </fieldset>
}
